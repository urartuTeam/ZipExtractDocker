#!/bin/bash

# Скрипт для инициализации базы данных
# Выполняет последовательность SQL-файлов для настройки базы данных

echo "Начинаем инициализацию базы данных..."

# Создаем таблицы и структуру базы данных
echo "1. Создание структуры базы данных..."
psql "$DATABASE_URL" -f database_init.sql

# Вставляем начальные данные
echo "2. Вставка начальных данных..."
psql "$DATABASE_URL" -f database_insert_data.sql

# Добавляем механизм soft delete
echo "3. Настройка механизма soft delete..."
psql "$DATABASE_URL" -f add_soft_delete.sql

# Исправляем последовательности
echo "4. Обновление последовательностей..."
psql "$DATABASE_URL" -f fix_sequences.sql

echo "Инициализация базы данных завершена успешно!"